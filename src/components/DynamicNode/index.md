---
category: Components
title: DynamicNode # 组件的标题，会在菜单侧边栏展示
toc: content # 在页面右侧展示锚点链接
group: # 分组
  title: antd二次封装组件 # 所在分组的名称
  order: 1 # 分组排序，值越小越靠前
---

# DynamicNode 节点配置演示组件

## 概述

不同节点拥有不同配置项的功能，核心采用**元数据驱动（Metadata-driven）** 结合**组件动态映射**的设计模式。该模式能够灵活支持节点配置的多样性，同时保证系统的可扩展性和代码复用性，避免冗余开发

## 组件介绍

一个基于元数据驱动的动态节点配置组件，允许开发者通过配置而非编码的方式快速定义和注入各种类型的节点，实现灵活可扩展的节点配置功能。

## 关键实现机制

1. 节点类型与元数据（Schema）定义
   每种节点类型（如 “Prompt 节点”“工具调用节点”“条件判断节点” 等）均通过**元数据（Schema）** 定义其专属配置项结构。元数据是描述配置项的 “说明书”，包含以下核心信息：

- **基础属性**：字段名（如 `prompt_template`、`tool_id`）、字段类型（文本、下拉选择、开关等）；
- **UI 表现**：对应的渲染组件（如输入框、代码编辑器、键值对编辑器等）；
- **验证规则**：是否必填、格式校验（如邮箱格式）、长度限制等；
- **辅助信息**：默认值、描述文案、占位符；
- **依赖关系**：字段间的显示 / 隐藏逻辑（如 “选择某工具后才显示参数配置”）。

2. 节点类型与配置组件的映射关系

- 大多数简单节点通过**内置配置组件**处理（基于元数据自动生成表单）；
- 复杂节点使用**自定义配置组件**，动态注入。

3. 动态表单生成器（核心组件）
   动态表单生成器是实现配置项差异化渲染的核心工具，其作用是根据元数据自动生成对应的 UI 表单。工作流程如下：

- **接收输入**：当前节点的元数据（Schema）和当前配置值；
- **解析元数据**：遍历配置项，根据 `type` 和 `widget` 字段匹配对应的表单控件；
- **处理依赖逻辑**：根据字段间的依赖关系（如 `dependsOn` 配置），动态显示 / 隐藏控件；
- **实时交互**：用户输入时，同步更新配置值并触发校验；
- **输出结果**：将最终配置值同步至全局状态

## 示例

<code src="./demo/base.tsx">基础用法</code>

## API

| 属性名           | 描述         | 类型                                  | 默认值 |
| ---------------- | ------------ | ------------------------------------- | ------ |
| callbackData     | 节点配置数据 | `(data: Record<string, any>) => void` | -      |
| callValidateData | 节点校验数据 | `(data: Record<string, any>) => void` | -      |
